<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>List Filter</title>
	<script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
<div id="root">
	<h2>Persons List</h2>
	<label>
		<input type="text" placeholder="Input name" v-model="keyword">
	</label>
	<ul>
		<li v-for="p in filteredPersons" :key="p.id">
			{{p.name}}-{{p.age}}-{{p.sex}}
		</li>
	</ul>
</div>
</body>

<script>
	Vue.config.productionTip = false;

	// using watch to filter the list
	// new Vue({
	// 	el: '#root',
	// 	data: {
	// 		keyword: '',
	// 		persons: [
	// 			{id: '001', name: '马冬梅', age: 18, sex: 'female'},
	// 			{id: '002', name: '周冬雨', age: 19, sex: 'female'},
	// 			{id: '003', name: '周杰伦', age: 20, sex: 'male'},
	// 			{id: '004', name: '温兆伦', age: 21, sex: 'male'}
	// 		],
	// 		filteredPersons: []
	// 	},
	// 	watch: {
	// 		keyword: {
	// 			immediate: true,
	// 			handler(newVal) {
	// 				this.filteredPersons = this.persons.filter(p => {
	// 					return p.name.indexOf(newVal) !== -1;
	// 				})
	// 			}
	// 		}
	// 	}
	// })

	// using computed to filter the list
	new Vue({
		el: '#root',
		data: {
			keyword: '',
			persons: [
				{id: '001', name: '马冬梅', age: 18, sex: 'female'},
				{id: '002', name: '周冬雨', age: 19, sex: 'female'},
				{id: '003', name: '周杰伦', age: 20, sex: 'male'},
				{id: '004', name: '温兆伦', age: 21, sex: 'male'}
			],
		},
		computed: {
			filteredPersons() {
				return this.persons.filter(p => {
					return p.name.indexOf(this.keyword) !== -1;
				})
			}
		}
	})
</script>
</html>